"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@zhlix/opencv-build"),r=require("npmlog"),i=require("../commons-93fafeec.js"),t=require("../utils-c2b0e463.js");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("path"),require("child_process"),require("os"),require("picocolors");var o=n(e),s=n(r);function l(e){if(e.isAutoBuildDisabled)return i.resolvePath(process.env.OPENCV_LIB_DIR)||function(e){if(s.default.info("install","OPENCV_LIB_DIR is not set, looking for default lib dir"),e.isWin)throw new Error("OPENCV_LIB_DIR has to be defined on windows when auto build is disabled");return t.defaultLibDir}(e);{const r=i.resolvePath(e.opencvLibDir);if(!r)throw Error("failed to resolve opencvLibDir path");return r}}s.default.level="silent";const u=()=>{const e=new o.default,r=l(e.env),i=e.getLibs.getLibs().filter((e=>e.libPath));if(!i.length)throw new Error("no OpenCV libraries found in lib dir: "+r);return t.getOPENCV4NODEJS_DEFINES(i).join(";")},a=()=>{const r=new e.OpenCVBuildEnv;return t.getOPENCV4NODEJS_INCLUDES(r).join(";")},f=()=>{const e=new o.default,r=l(e.env),i=e.getLibs.getLibs().filter((e=>e.libPath));if(!i.length)throw new Error("no OpenCV libraries found in lib dir: "+r);return t.getOPENCV4NODEJS_LIBRARIES(e.env,r,i).join(";")},E=()=>l((new o.default).env),c=process.argv[2];if(!c)throw new Error("没有传递环境名称来解析环境");let d;switch(c){case"OPENCV4NODEJS_DEFINES":d=u();break;case"OPENCV4NODEJS_INCLUDES":d=a();break;case"OPENCV4NODEJS_LIBRARIES":d=f();break;case"OPENCV4NODEJS_LIBRARY_DIR":d=E();break;default:throw new Error("传递的环境名称不符合要求")}d.split(";").filter((e=>e)).forEach((e=>console.log(e))),exports.getDefines=u,exports.getIncludes=a,exports.getLibraries=f,exports.getLibraryDir=E;
